@{
    ViewData["Title"] = "Login";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section StyleCss {
    <link href="../mycss/mycheckbox.css" rel="stylesheet" />
    <style>
        #Logout:hover {
            color: #a8741a
        }
    </style>
}
@model DiamondLuxurySolution.ViewModel.Models.User.Customer.UpdateCustomerRequest
<div class="header-bottom header-top-1 position-relative navigation-wrap fixed-header">
    <div class="container position-static">
        <div class="row">
            <div class="col-12 position-static">
                <nav class="main-navigation">
                    <ul class="mainmenu col-12">
                        <li class="mainmenu__item active">
                            <a href="/Home/Index" class="mainmenu__link" style="color: white;">Trang Chủ</a>
                        </li>
                        <li class="mainmenu__item menu-item-has-children has-children">
                            <a href="#" class="mainmenu__link">Kim Cương</a>
                            <ul class="sub-menu">
                                <li><a href="#">Kim Cương Tự Nhiên</a></li>
                                <li><a href="#">Kim Cương Nhân Tạo</a></li>
                            </ul>
                        </li>
                        <li class="mainmenu__item menu-item-has-children">
                            <a href="/DiamondJewelry/Index" class="mainmenu__link">Trang Sức Kim Cương</a>
                            <ul class="megamenu three-column">
                                <li>
                                    <a class="megamenu-title" href="NhanKimCuong.html">Nhẫn Kim Cương</a>
                                    <ul>
                                        <li>
                                            <a href="NhanKimCuongNam.html">Nhẫn Kim Cương Nam</a>
                                        </li>
                                        <li>
                                            <a href="NhanKimCuongNu.html">Nhẫn Kim Cương Nữ</a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a class="megamenu-title" href="VongTayKimCuong.html">
                                        Vòng Tay Kim
                                        Cương
                                    </a>
                                    <a class="megamenu-title" href="LacTayKimCuong copy.html">
                                        Lắc Tay Kim
                                        Cương
                                    </a>
                                </li>
                                <li>
                                    <a class="megamenu-title" href="HoaTayKimCuong.html">
                                        Hoa Tai Kim
                                        Cương
                                    </a>
                                    <a class="megamenu-title" href="MatDayChuyenKimCuong.html">
                                        Mặt Dây
                                        Chuyền KC
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="mainmenu__item menu-item-has-children">
                            <a href="trangsuccuoi.html" class="mainmenu__link">Trang Sức Cưới</a>
                            <ul class="megamenu">
                                <li>
                                    <a class="megamenu-title" href="nhanCuoiKimCuong.html">
                                        Nhẫn Cưới Kim
                                        Cương
                                    </a>
                                </li>
                                <li>
                                    <a class="megamenu-title" href="nhanKCcauhon.html">
                                        Nhẫn Kim Cương Cầu
                                        Hôn
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="mainmenu__item menu-item-has-children has-children">
                            <a href="BoSuuTap.html" class="mainmenu__link">Bộ Sưu Tập</a>
                            <ul class="sub-menu">
                                <li class="menu-item-has-children has-children">
                                    <a href="BoSuuTapQuyOng.html">BST Quý Ông</a>
                                    <ul class="sub-menu">
                                        <li><a href="DangCapUyQuyen.html">Đẳng Cấp & Uy Quyền</a></li>
                                        <li><a href="SangTrongBanLinh.html">Sang Trọng Và Bản Lĩnh</a></li>
                                        <li>
                                            <a href="PhongThuyThanhCong.html">Phong Thủy Và Thành Công</a>
                                        </li>
                                        <li>
                                            <a href="PhongCachThoiTrang.html">Phong Cách Và Thời Trang</a>
                                        </li>
                                    </ul>
                                </li>
                                <li class="menu-item-has-children has-children">
                                    <a href="BosuuTapNhanCuoi.html">BST Nhẫn Cưới</a>
                                </li>
                                <li class="menu-item-has-children has-children">
                                    <a href="BosuuTapNhanCauHon.html">BST Nhẫn Cầu Hôn</a>
                                </li>
                                <li class="menu-item-has-children has-children">
                                    <a href="BosuuTapDayChuyen.html">BST Dây Chuyền</a>
                                </li>
                                <li class="menu-item-has-children has-children">
                                    <a href="BosuuTapKimCuong.html">BST Kim Cương</a>
                                </li>
                                <li class="menu-item-has-children has-children">
                                    <a href="BosuuTapBanChayNhat.html">BST Bán Chạy Nhất</a>
                                </li>
                            </ul>
                        </li>
                        <li class="mainmenu__item">
                            <a href="/TablePrice/Index" class="mainmenu__link">Bảng Giá Kim Cương</a>
                        </li>
                        <li class="mainmenu__item menu-item-has-children has-children">
                            <a class="mainmenu__link" href="#">Kiến Thức</a>
                            <ul class="sub-menu">
                                <li class="menu-item">
                                    <a href="kienthuckimcuong.html">Kiến Thức Kim Cương</a>
                                </li>
                                <li class="menu-item">
                                    <a href="kienthuctrangsuc.html">Kiến Thức Trang Sức</a>
                                </li>
                                <li class="menu-item-has-children has-children">
                                    <a href="#">Hướng Dẫn Chọn Ni</a>
                                    <ul class="sub-menu">
                                        <li class="menu-item-has-children">
                                            <a href="huongdandovongtay.html">Hướng Dẫn Đo Vòng Tay</a>
                                        </li>
                                        <li class="menu-item-has-children">
                                            <a href="huongdandoninhan.html">Hướng Dẫn Đo Ni Nhẫn</a>
                                        </li>
                                        <li class="menu-item-has-children">
                                            <a href="huongdandodaychuyen.html">Hướng Dẫn Đo Dây Chuyền</a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="mainmenu__item menu-item-has-children has-children">
                            <a href="#" class="mainmenu__link">Thông Tin</a>
                            <ul class="sub-menu">
                                <li><a href="ThongTinKhuyenMai.html">Thông Tin Khuyến Mãi</a></li>
                                <li><a href="TinTuc.html">Tin Tức</a></li>
                                <li><a href="CauHoiThuongGap.html">Các Câu Hỏi Thường Gặp</a></li>
                            </ul>
                        </li>
                        <li class="mainmenu__item">
                            <a href="gioithieu.html" class="mainmenu__link">Giới Thiệu</a>
                        </li>
                        <li class="mainmenu__item">
                            <a href="lienhe.html" class="mainmenu__link">Liên Hệ</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="row no-gutters">
            <div class="col-12">
                <div class="mobile-menu"></div>
            </div>
        </div>
    </div>
</div>



<div class="breadcrumb-area">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center">
                <h1 class="page-title">Tài khoản cá nhân</h1>
                <ul class="breadcrumb justify-content-center">
                    <li><a href="/Home/Index">Trang Chủ</a></li>
                    <li class="current"><a href="/Account/Profile?CustomerId=@Model.CustomerId">Tài khoản cá nhân</a></li>
                </ul>
            </div>
        </div>
    </div>


<!-- Main Content wrapper start -->

<section class="main-content-wrapper">
    <div class="account-wrapper pt--40 pb--80 pt-md--30 pb-md--60">
        <div class="container">
            <div class="user-dashboard-tab">
                <div class="row">
                    <div class="col-lg-4 mb-md--30">
                        <div class="user-dashboard-tab__head nav flex-column" role="tablist" aria-orientation="vertical">
                            <button type="button" style="font-weight:bold" class="nav-link p-3 active" data-bs-toggle="pill" role="tab" data-bs-target="#accountdetails" aria-controls="accountdetails" aria-selected="true">Thông tin tài khoản</button>
                            <button type="button" style="font-weight:bold" class="nav-link p-3" data-bs-toggle="pill" role="tab" data-bs-target="#orders" aria-controls="orders" aria-selected="false">Các đơn hàng</button>
                            <form asp-action="Logout" asp-controller="Account" method="post">
                                <input type="submit" value="Đăng xuất" id="Logout" class="nav-link p-3" />
                            </form>
                        </div>
                    </div>
                    <div class="col-lg-8">
                        <div class="user-dashboard-tab__content tab-content">
                            <div class="tab-pane fade show active" id="dashboard">
                            </div>
                            <div class="tab-pane fade" id="orders">

                                <div class="account-table table-content table-responsive" style="overflow-x:hidden">
                                    @if (ViewBag.ListOrder != null && ViewBag.ListOrder.Count > 0)
                                    {
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th style="border:none">#</th>
                                                    <th style="border:none">Mã đơn hàng</th>
                                                    <th style="border:none">Ngày đặt</th>
                                                    <th style="border:none">Tổng tiền</th>
                                                    <th style="border:none" class="text-center">Hành động</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @{
                                                    var index = 0;
                                                }
                                                @foreach (var order in ViewBag.ListOrder)
                                                {
                                                    <tr style="border:none">
                                                        <td style="border:none">@(++index)</td>
                                                        <td style="border:none" class="p--10 wide-column">@order.OrderId</td>
                                                        <td style="border:none">@order.Datemodified</td>
                                                            <td style="border:none" class="wide-column">@(order.TotalAmount.ToString("N0") + "₫")</td>
                                                        <td style="border:none"><a href="/Order/ViewDetail?OrderId=@order.OrderId" class="btn btn-medium btn-style-1">Xem</a></td>
                                                    </tr>
                                                }
                                            </tbody>
                                        </table>
                                        <form asp-action="ViewAll" asp-controller="Order" method="post">
                                            <div class="text-center">
                                                <input type="hidden" value="@Model.CustomerId" name="CustomerId"/>
                                                <input type="submit" class="btn" style="background-color:#a8741a;" value="Xem tất cả" />
                                            </div>
                                        </form>


                                    }
                                    else
                                    {
                                        <!-- Main content wrapper start -->
                                        <div class="main-content-wrapper">
                                            <div class="wishlist-area pt--10 pb--80 pt-md--30 pb-md--60">
                                                <div class="container">
                                                    <!-- Wishlist Area Start -->
                                                    <h3 style="text-align: center; border:none ">Chưa Có Sản Phẩm Nào Trong Giỏ Hàng</h3>
                                                    <div style="text-align: center; margin-bottom: 40px;margin-top: 40px;">
                                                        <img src="../assets/img/pic_product/empty_cart.png" alt="Empty Cart">
                                                    </div>

                                                    <a href="/Home/Index" class="btn add-to-cart btn-medium btn-style-2"
                                                       style="display: block; margin: 0 auto; text-align: center; width: fit-content;">
                                                        Mua sắm ngay
                                                    </a>
                                                    <!-- Wishlist Area End -->
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Main content wrapper end -->
                                    }

                                </div>
                            </div>
                            <div class="tab-pane fade" id="accountdetails">
                                <div class="account-form bg--2">
                                    <div class="text-center mb--20">
                                        <p>Xin chào <strong style="color:#a8741a">@Context.Session.GetString(DiamondLuxurySolution.Utilities.Constants.Systemconstant.AppSettings.CUSTOMER_NAME)</strong></p>
                                    </div>
                                    @if (ViewBag.Errors != null)
                                    {
                                        foreach (var error in ViewBag.Errors)
                                        {
                                            <h5 style="color:red !important" class="ml--10 text-danger">@error</h5>
                                        }
                                    }
                                    <form asp-action="Profile" asp-controller="Account" class="form">
                                        <div class="row mb--20">
                                            <div class="col-md-6 mb-sm--20">
                                                <div class="form__group">
                                                    <label for="account_fname" class="form__label">Họ và tên</label>
                                                    <input type="text" asp-for="FullName" id="account_fname" class="form__input form__input--2">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form__group">
                                                    <label for="account_lname" class="form__label">Số điện thoại</label>
                                                    <input type="number" asp-for="PhoneNumber" id="account_lname" class="form__input form__input--2">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mb--20">
                                            <div class="col-md-6 mb-sm--20">
                                                <div class="form__group">
                                                    <label for="account_fname" class="form__label">Ngày sinh</label>
                                                    <input type="date" asp-for="Dob" style="color:#a8741a" id="account_fname" class="form__input form__input--2 p-3">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form__group">
                                                    <label for="account_lname" class="form__label">Địa chỉ</label>
                                                    <input type="text" asp-for="Address" id="account_lname" class="form__input form__input--2">
                                                </div>
                                            </div>
                                        </div>

                                        @if (Context.Session.GetString(DiamondLuxurySolution.Utilities.Constants.Systemconstant.AppSettings.PLATFORM).ToString().Equals(DiamondLuxurySolution.Utilities.Constants.Systemconstant.AppSettings.DEFAULT_PLATFORM))
                                        {
                                            <div class="row mb--20">
                                                <div class="col-md-6 mb-sm--20">
                                                    <div class="form__group">
                                                        <label for="account_fname" class="form__label">Email</label>
                                                        <input type="text" readonly asp-for="Email" style="color:#a8741a" class="form__input form__input--2 p-3">
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                        @if (Context.Session.GetString(DiamondLuxurySolution.Utilities.Constants.Systemconstant.AppSettings.PLATFORM).ToString().Equals(DiamondLuxurySolution.Utilities.Constants.Systemconstant.AppSettings.DEFAULT_PLATFORM))
                                        {
                                            <div class="row">
                                                <div class="col-12">
                                                    <h4>Thay đổi mật khẩu</h4>
                                                </div>
                                            </div>

                                            <div class="row mb--20">
                                                <div class="col-12">
                                                    <div class="form__group">
                                                        <label for="cur_password" class="form__label">Mật khẩu hiện tại</label>
                                                        <input type="password" asp-for="OldPassword" id="cur_password" class="form__input form__input--2">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mb--20">
                                                <div class="col-12">
                                                    <div class="form__group">
                                                        <label for="new_password" class="form__label">Mật khẩu mới</label>
                                                        <input type="password" asp-for="NewPassword" id="new_password" class="form__input form__input--2">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mb--20">
                                                <div class="col-12">
                                                    <div class="form__group">
                                                        <label for="new_password" class="form__label">Nhập lại mật khẩu mới</label>
                                                        <input type="password" asp-for="ConfirmPassword" id="confirm_password" class="form__input form__input--2">
                                                    </div>
                                                </div>
                                            </div>


                                        }
                                        <div class="row">
                                            <div class="col-12">
                                                <button type="submit" id="submit_button" class="btn btn-medium btn-style-2">Lưu</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Main Content wrapper end -->
@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            // Kích hoạt tab "Account Details" khi trang được load
            $('.nav-link[data-bs-target="#accountdetails"]').addClass('active');
            $('.tab-pane').removeClass('show active');
            $('#accountdetails').addClass('show active');
        });

    </script>
    <script>
        $(document).ready(function () {
            $('#submit_button').click(function (event) {
                var curPassword = $('#cur_password').val();
                var newPassword = $('#new_password').val();
                var confirmPassword = $('#confirm_password').val();

                if (curPassword || newPassword || confirmPassword) {
                    if (!curPassword || !newPassword || !confirmPassword) {
                        alert('Vui lòng nhập đủ tất cả các trường thông tin của mật khẩu nếu muốn thay đổi mật khẩu');
                        event.preventDefault();
                    } else if (newPassword !== confirmPassword) {
                        alert('Mật khẩu mới và xác nhận mật khẩu không khớp');
                        event.preventDefault();
                    }
                }
            });
        });
    </script>

}