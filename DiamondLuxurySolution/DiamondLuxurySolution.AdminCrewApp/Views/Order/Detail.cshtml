@model DiamondLuxurySolution.ViewModel.Models.Order.OrderVm

@{
    ViewData["Title"] = "Detail";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Chi tiết tin tức</h1>
@if (ViewBag.Errors != null)
{
    foreach (var error in ViewBag.Errors)
    {
        <h6 class="text-danger">@error</h6>
    }
}
@if (Model != null)
{
    <div>
        <hr />
        <dl class="row">
            <dt class="col-sm-3">
                Mã đơn hàng
            </dt>
            <dd class="col-sm-9">
                @Html.DisplayFor(model => model.OrderId)
            </dd>
            <dt class="col-sm-3">
                Nhân viên phụ trách
            </dt>
            <dd class="col-sm-9">
                <p>
                    @Html.DisplayFor(model => model.StaffVm.FullName)
                </p>
            </dd>
            <dt class="col-sm-3">
                Lần chỉnh sửa đơn hàng gần đây
            </dt>
            <dd class="col-sm-9">
                @Html.DisplayFor(model => model.Datemodified)
            </dd>
            <dt class="col-sm-3">
                Người đặt
            </dt>
            <dd class="col-sm-9">
                @Html.DisplayFor(model => model.ShipName)
            </dd>
            <dt class="col-sm-3">
                Số điện thoại
            </dt>
            <dd class="col-sm-9">
                @Html.DisplayFor(model => model.ShipPhoneNumber)
            </dd>
            <dt class="col-sm-3">
                Email
            </dt>
            <dd class="col-sm-9">
                @Html.DisplayFor(model => model.ShipEmail)
            </dd>

            <dt class="col-sm-3">
                Địa chỉ giao hàng
            </dt>
            <dd class="col-sm-9">
                @if (Model.Description != null)
                {
                    <div>
                        <p>
                            @Html.DisplayFor(model => model.ShipAdress)
                        </p>
                    </div>
                }
                else
                {
                    <p>Không có</p>
                }
            </dd>
            <dt class="col-sm-3">
                Mô tả
            </dt>
            <dd class="col-sm-9">
                @if (Model.Description != null)
                {
                    <div>
                        <p>
                            @Html.DisplayFor(model => model.Description)
                        </p>
                    </div>
                }
                else
                {
                    <p>Không có</p>
                }
            </dd>

            <dt class="col-sm-3">
                Trạng thái
            </dt>
            <dd class="col-sm-9">
                @if (Model.Status.ToString().Equals(DiamondLuxurySolution.Utilities.Constants.Systemconstant.OrderStatus.Canceled.ToString()))
                {
                    <p value="@Model.Status">
                        Hủy đơn
                    </p>
                }
                else if (Model.Status.ToString().Equals(DiamondLuxurySolution.Utilities.Constants.Systemconstant.OrderStatus.Confirmed.ToString()))
                {
                    <p value="@Model.Status">
                        Đã xác nhận
                    </p>
                }
                else if (Model.Status.ToString().Equals(DiamondLuxurySolution.Utilities.Constants.Systemconstant.OrderStatus.Deposit.ToString()))
                {
                    <p value="@Model.Status">
                        Đặt cọc
                    </p>
                }
                else if (Model.Status.ToString().Equals(DiamondLuxurySolution.Utilities.Constants.Systemconstant.OrderStatus.InProgress.ToString()))
                {
                    <p value="@Model.Status">
                        Đang xử lý
                    </p>
                }
                else if (Model.Status.ToString().Equals(DiamondLuxurySolution.Utilities.Constants.Systemconstant.OrderStatus.ProcessOfPayment.ToString()))
                {
                    <p value="@Model.Status">
                        Trong quá trình thanh toán
                    </p>
                }
                else if (Model.Status.ToString().Equals(DiamondLuxurySolution.Utilities.Constants.Systemconstant.OrderStatus.Shipping.ToString()))
                {
                    <p value="@Model.Status">
                        Đang vận chuyển
                    </p>
                }
                else if (Model.Status.ToString().Equals(DiamondLuxurySolution.Utilities.Constants.Systemconstant.OrderStatus.Success.ToString()))
                {
                    <p value="@Model.Status">
                        Thành công
                    </p>
                }
                else
                {
                    <p value="@Model.Status">
                        N/A
                    </p>
                }  

            </dd>

            <dt class="col-sm-3">
                Chương trình khuyến mãi
            </dt>
            <dd class="col-sm-9">
                @if (Model.PromotionVm != null)
                {
                    <div>
                        <p>
                            @Html.DisplayFor(model => model.PromotionVm.PromotionName)
                        </p>

                        <p>
                            <span>Từ ngày</span>
                            @Html.DisplayFor(model => model.PromotionVm.StartDate)
                        </p>

                        <p>
                            <span>Đến ngày</span>
                            @Html.DisplayFor(model => model.PromotionVm.EndDate)
                        </p>
                    </div>
                }
                else
                {
                    <p>Không có</p>
                }
            </dd>



            <dt class="col-sm-3">
                Mã giảm giá
            </dt>
            <dd class="col-sm-9">
                @if (Model.DiscountVm != null)
                {
                    <div>
                        <p>
                            @Html.DisplayFor(model => model.DiscountVm.DiscountName)
                        </p>
                    </div>
                }
                else
                {
                    <p>Không có</p>
                }
            </dd>
            <dt class="col-sm-3">
                Sản phẩm
            </dt>
            <dd class="col-sm-9">
                @if (Model.ListOrderProduct != null)
                {
                    foreach (var product in Model.ListOrderProduct)
                    {
                        <p>
                            @product.ProductName &nbsp; Giá: @product.UnitPrice &nbsp; Số lượng @product.Quantity
                        </p>
                    }
                }
                else
                {
                    <p>Không có</p>
                }
            </dd>

          
            <dt class="col-sm-3">
                Số tiền giảm
            </dt>
            <dd class="col-sm-9">
                @if(Model.TotalSale != null && Model.TotalSale!= 0)
                {
                    @Html.DisplayFor(model => model.TotalSale)

                    <span>đ</span>
                }
                else
                {

                    <span>0đ</span>

                }
            </dd>
            <dt class="col-sm-3">
                Tổng cộng
            </dt>
            <dd class="col-sm-9" style="color:red">
                @Html.DisplayFor(model => model.TotalAmount)<span>đ</span>
            </dd>

            <dt class="col-sm-3">
                Trả trước
            </dt>
            <dd class="col-sm-9">
                @Html.DisplayFor(model => model.Deposit)
            </dd>

            <dt class="col-sm-3">
                Còn lại
            </dt>
            <dd class="col-sm-9">
                @Html.DisplayFor(model => model.RemainAmount)
            </dd>

            <dt class="col-sm-3">
                Số lần thanh toán
            </dt>
            <dd class="col-sm-9">
                @if (Model.OrdersPaymentVm != null)
                {
                    foreach (var payment in Model.OrdersPaymentVm)
                    {
                        <p style="font-weight:bold">Thời gian: @payment.PaymentTime</p>
                        <p>
                            &nbsp;&nbsp; &nbsp;&nbsp; - Phương thức: @payment.PaymentMethod &nbsp;  &nbsp; Số tiền: @payment.PaymentAmount &nbsp; Lời nhắn: @(payment.Message != string.Empty ? payment.Message : "N/A")  &nbsp; Trạng thái: @if (payment.Status.ToString().Equals(DiamondLuxurySolution.Utilities.Constants.Systemconstant.TransactionStatus.Success.ToString()))
                            {
                                <span>Thành công</span>
                            }
                            else if (payment.Status.ToString().Equals(DiamondLuxurySolution.Utilities.Constants.Systemconstant.TransactionStatus.Waiting.ToString()))
                            {
                                <span>Đang chờ</span>
                            }
                            else if (payment.Status.ToString().Equals(DiamondLuxurySolution.Utilities.Constants.Systemconstant.TransactionStatus.Failed.ToString()))
                            {
                                <span>Thất bại</span>
                            }
                        </p>
                    }
                }
                else
                {
                    <p>Không có</p>
                }
            </dd>

            <dt class="col-sm-3">
                Giao hàng
            </dt>
            <dd class="col-sm-9">
                <div class="form-check form-switch ">
                    <input class="form-check-input f-18 ml-3" type="checkbox" value="@Model.IsShip" disabled />
                </div>
            </dd>
            <dt class="col-sm-3">
                Nhân viên giao hàng
            </dt>
            <dd class="col-sm-9">
                @if (Model.ShiperVm != null)
                {
                    @Html.DisplayFor(model => model.ShiperVm.FullName)
                }
                else
                {
                    <p>Không có</p>
                }
            </dd>
        </dl>
    </div>
    <div class="row">
        <div class="col-md-3">
            @Html.ActionLink("Chỉnh sửa", "Edit", new { OrderId = Model.OrderId }, new { @class = "btn btn-warning" })
        </div>
        @if (Model != null && Model.RemainAmount > 0)
        {
            <div class="col-md-3">
                @Html.ActionLink("Tiếp tục thanh toán", "PaidTheRest", new { OrderId = Model.OrderId }, new { @class = "btn btn-info" })
            </div>
        }
       
        <div class="col-md-6">
            <a class="m-5" asp-action="Index" asp-controller="Order">Về trang quản lí tin tức</a>
        </div>
    </div>
}
else
{
    <div>
        <a class="m-5" asp-action="Index" asp-controller="Order">Về trang quản lí tin tức</a>
    </div>
}


